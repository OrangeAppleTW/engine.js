!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=11)}([function(t,e){var i={};i.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},i.radToDegree=function(t){return t%=2*Math.PI,t<0&&(t+=2*Math.PI),180*t/Math.PI},i.degreeToRad=function(t){return t%=360,t<0&&(t+=360),t/180*Math.PI},i.distanceBetween=function(){var t={x:0,y:0},e={x:0,y:0};if(i.isNumeric(arguments[0].x)&&i.isNumeric(arguments[0].y)&&i.isNumeric(arguments[1].x)&&i.isNumeric(arguments[1].y))t.x=arguments[0].x,t.y=arguments[0].y,e.x=arguments[1].x,e.y=arguments[1].y;else{if(!(i.isNumeric(arguments[0])&&i.isNumeric(arguments[1])&&i.isNumeric(arguments[2])&&i.isNumeric(arguments[3])))throw"請傳入角色(Sprite)或是 X, Y 坐標值";t.x=arguments[0],t.y=arguments[1],e.x=arguments[2],e.y=arguments[3]}return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.exports=i},function(t,e){function i(t){this._state="readyToStart",this._update=t}i.prototype.start=function(){if("readyToStart"===this._state){var t;this._state="running",t=function(){"running"===this._state?(this._update(),setTimeout(function(){requestAnimationFrame(t)},1e3/60)):this._state="readyToStart"}.bind(this),setTimeout(t,0)}else"stopping"===this._state&&setTimeout(start,10)},i.prototype.stop=function(){"running"===this._state&&(this._state="stopping")},t.exports=i},function(t,e){function i(t,e){this.pool=[],this.messages=[],this.io=t,this.debugMode=e||!1}function n(t,e,i,n){t.touched(i)&&(e.call(t),n&&console.log("Just fired a hover handler at: ("+i.x+","+i.y+")"))}function r(t,e,i,n){if(i.x&&i.y)if(t){t.x+t.width/2>i.x&&(i.x,t.x,t.width),t.y+t.height/2>i.y&&(i.y,t.y,t.height);t.touched(i.x,i.y)&&(e.call(t),n&&console.log("Just fired a click handler on a sprite! ("+JSON.stringify(i)+")"))}else e(),n&&console.log("Just fired a click handler on stage! ("+JSON.stringify(i)+")")}function o(t,e,i,n){i[t]&&(e(),n&&console.log("Just fired a keydown handler on: "+t))}function s(t,e,i,n){i[t]&&(e(),n&&console.log("Just fired a holding handler on: "+t))}function a(t,e,i,n,r){i.includes(n)&&e.call(t)}function h(t,e,i,n){for(var r,o=0;r=i[o];o++)t.touched(r)&&(e.call(t,r),n&&console.log({event:"Touch",sprite:t,target:r}))}i.prototype.traverse=function(){for(var t=this.pool,e=this.io,i=this.messages,c=this.debugMode,u=0;u<t.length;u++){if(t[u].sprite||t[u].sprites){var l=t[u].sprite||t[u].sprites[0];if("Sprite"==l.constructor.name&&l._deleted){t.splice(u,1);continue}}"hover"==t[u].event?n(t[u].sprite,t[u].handler,e.cursor,c):"click"==t[u].event?r(t[u].sprite,t[u].handler,e.clicked,c):"keydown"==t[u].event?o(t[u].key,t[u].handler,e.keydown,c):"keyup"==t[u].event?o(t[u].key,t[u].handler,e.keyup,c):"holding"==t[u].event?s(t[u].key,t[u].handler,e.holding,c):"listen"==t[u].event?a(t[u].sprite,t[u].handler,i,t[u].message,c):"touch"==t[u].event&&h(t[u].sprite,t[u].handler,t[u].targets,c)}this._clearEventRecord(),this._clearMessages()},i.prototype._clearEventRecord=function(){var t=this.io;t.clicked.x=null,t.clicked.y=null;for(var e in t.keydown)t.keydown[e]=!1,t.keyup[e]=!1},i.prototype._clearMessages=function(){this.messages=[]},i.prototype.clear=function(){this.pool=[]},i.prototype.register=function(){var t=arguments[0],e={event:t,handler:arguments[arguments.length-1]};"touch"===t?(e.sprite=arguments[1],arguments[2].constructor===Array?e.targets=arguments[2]:e.targets=[arguments[2]]):"keydown"===t||"keyup"===t||"holding"===t?e.key=arguments[1]:"click"===t?e.sprite=arguments[1]:"listen"===t&&(e.message=arguments[1],e.sprite=arguments[2]),this.pool.push(e)},i.prototype.emit=function(t){this.messages.push(t)},t.exports=i},function(t,e){function i(){this.fps=0,this._lastFrameUpdatedTime=(new Date).getTime()}i.prototype.updateFPS=function(){var t=(new Date).getTime();this.fps=Math.round(1e3/(t-this._lastFrameUpdatedTime)),this._lastFrameUpdatedTime=t},t.exports=i},function(t,e,i){var n=i(10),r=function(t,e,i){var r={},o={x:0,y:0,isDown:!1,left:!1,right:!1},s={x:null,y:null},a={},h={},c={};return i=i||!1,t.setAttribute("tabindex","1"),t.style.outline="none",t.oncontextmenu=function(){return!1},t.addEventListener("mousedown",function(t){1==t.which&&(o.left=!0),3==t.which&&(o.right=!0),o.isDown=!0}),t.addEventListener("mouseup",function(t){1==t.which&&(o.left=!1),3==t.which&&(o.right=!1),o.isDown=o.left||o.right}),t.addEventListener("mousemove",function(t){o.x=t.offsetX/e.zoom,o.y=t.offsetY/e.zoom}),t.addEventListener("click",function(t){s.x=t.offsetX/e.zoom,s.y=t.offsetY/e.zoom,i&&console.log("Clicked! cursor:"+JSON.stringify(o))}),t.addEventListener("keydown",function(t){var e=n(t.keyCode);h[e]=!0,c[e]=!0,i&&console.log("Keydown! key:"+e)}),t.addEventListener("keyup",function(t){var e=n(t.keyCode);a[e]=!0,c[e]=!1,i&&console.log("Keyup! key:"+e)}),r.cursor=o,r.clicked=s,r.keyup=a,r.keydown=h,r.holding=c,r};t.exports=r},function(t,e,i){function n(t,e,i){function n(t){var e=s[t];return e||(e=new Image,e.src=t,s[t]=e),e}var s={},a=[];this.clear=function(){t.clearRect(0,0,e.width,e.height)},this.print=function(t,e,i,n,o,s){a.push({words:t,x:r.isNumeric(e)?e:20,y:r.isNumeric(i)?i:20,color:n||"black",size:o||16,font:s||"Arial"})},this.drawTexts=function(){for(var e=0;e<a.length;e++){var i=a[e];t.textBaseline="top",t.font=i.size+"px "+i.font,t.fillStyle=i.color,t.fillText(i.words,i.x,i.y)}a=[]},this.drawSprites=function(t){t.each(this.drawInstance)},this.drawInstance=function(e){if(!e.hidden){var i=n(e.getCurrentCostume());e.width=i.width*e.scale,e.height=i.height*e.scale;var o=r.degreeToRad(e.direction);if(t.globalAlpha=e.opacity,"flipped"===e.rotationStyle){if(o>=Math.PI)return t.translate(2*e.x,0),t.scale(-1,1),t.drawImage(i,e.x-e.width/2,e.y-e.height/2,e.width,e.height),t.scale(-1,1),t.translate(2*-e.x,0),void(t.globalAlpha=1);var o=0}if("fixed"===e.rotationStyle)var o=0;t.translate(e.x,e.y),t.rotate(o),t.drawImage(i,-e.width/2,-e.height/2,e.width,e.height),t.rotate(-o),t.translate(-e.x,-e.y),t.globalAlpha=1}},this.getImgFromCache=n,this.drawBackdrop=function(i,n,r,o,a){if(i.includes(".")){var h=s[i];h||(h=new Image,h.src=i,s[i]=h),t.drawImage(h,n||0,r||0,o||h.width,a||h.height)}else t.fillStyle=i,t.fillRect(0,0,e.width,e.height)},this.preload=function(t,e,n){function r(t){o.addCompletionListener(function(){t()})}function a(t){o.addProgressListener(function(e){t(e)})}var h={};if(t.length>0){e&&r(e),n&&a(n);for(var c=0;c<t.length;c++){var u=t[c];s[u]=o.addImage(u)}h.complete=r,h.progress=a,o.start(),i&&(console.log("Start loading "+t.length+" images..."),o.addProgressListener(function(t){console.log("Preloading progressing...")}),o.addCompletionListener(function(){console.log("Preloading completed!")}))}else e&&e();return h}}var r=i(0),o=new(i(9));t.exports=n},function(t,e,i){function n(t){this.sounds={},this.playing=[]}var r=new(i(12));n.prototype={preload:function(t,e,i){this.sounds=r.preload(t,e,i)},play:function(t){if(this.sounds[t]){var e=this.sounds[t].cloneNode();this.playing.push(e),e.play()}else{var e=new Audio(t);this.sounds[t]=e,this.playing.push(e),e.play()}},stop:function(){for(var t=0;t<this.playing.length;t++)this.playing[t].pause();this.playing=[]}},t.exports=n},function(t,e,i){function n(t,e,i,n){t.constructor!==String&&t.constructor!==Array||(t={costumes:[].concat(t)}),this.x=o.isNumeric(t.x)?t.x:i.width/2,this.y=o.isNumeric(t.y)?t.y:i.height/2,this.width=1,this.height=1,this.direction=t.direction||0,this.rotationStyle=t.rotationStyle||"full",this.scale=t.scale||1,this.costumes=[].concat(t.costumes),this.hidden=t.hidden||!1,this.layer=o.isNumeric(t.layer)?t.layer:0,this.opacity=o.isNumeric(t.opacity)?t.opacity:1,this.costumeId=0,this._onTickFuncs=[],this._deleted=!1,this._eventList=e,this._settings=i,this._renderer=n,this._animation={frames:[],rate:5,timer:0}}function r(t,e){if(this.hidden)return!1;var i=crossY=!1;if(arguments[0]instanceof n){if(this==arguments[0])return!1;if(arguments[0].hidden)return!1;var r=arguments[0];if(r._deleted)return!1;i=this.x+this.width/2>r.x-r.width/2&&r.x+r.width/2>this.x-this.width/2,crossY=this.y+this.height/2>r.y-r.height/2&&r.y+r.height/2>this.y-this.height/2}else if(o.isNumeric(arguments[0].x)&&o.isNumeric(arguments[0].y)){var h=arguments[0].x,c=arguments[0].y;i=this.x+this.width/2>h&&h>this.x-this.width/2,crossY=this.y+this.height/2>c&&c>this.y-this.height/2}else{if(!o.isNumeric(arguments[0])||!o.isNumeric(arguments[1]))throw"請傳入角色(Sprite)、{x:x, y:y}，或是 X, Y 坐標值";var h=arguments[0],c=arguments[1];i=this.x+this.width/2>h&&h>this.x-this.width/2,crossY=this.y+this.height/2>c&&c>this.y-this.height/2}if(i&&crossY){var u=this._renderer,l=this._settings;if(s.width=l.width,s.height=l.height,!this._renderer)return console.log(this);if(a.globalCompositeOperation="source-over",a.drawImage(u.getImgFromCache(this.getCurrentCostume()),this.x-this.width/2,this.y-this.height/2,this.width,this.height),a.globalCompositeOperation="source-in",arguments[0]instanceof n){var r=arguments[0];a.drawImage(u.getImgFromCache(r.getCurrentCostume()),r.x-r.width/2,r.y-r.height/2,r.width,r.height)}else if(o.isNumeric(arguments[0].x)&&o.isNumeric(arguments[0].y))a.fillRect(arguments[0].x,arguments[0].y,1,1);else{if(!o.isNumeric(arguments[0])||!o.isNumeric(arguments[1]))return!1;a.fillRect(arguments[0],arguments[1],1,1)}for(var d=a.getImageData(this.x-this.width/2,this.y-this.height/2,this.width,this.height).data,p=d.length,f=0;f<p;f+=4)if(d[f+3]>0)return!0}return!1}var o=i(0),s=document.createElement("canvas"),a=s.getContext("2d");n.prototype.update=function(){this._updateDirection(),this._updateFrames();for(var t=0;t<this._onTickFuncs.length;t++)this._onTickFuncs[t].call(this)},n.prototype._updateDirection=function(){this.direction=this.direction%360,this.direction<0&&(this.direction+=360)},n.prototype._updateFrames=function(){var t=this._animation;if(t.frames.length>0){var e=(new Date).getTime();e>=t.timer+1e3/t.rate&&(t.timer=e,this.costumeId=t.frames.shift(),t.frames.length<=0&&t.callback&&t.callback())}},n.prototype.moveTo=function(t,e){this.x=t,this.y=e},n.prototype.move=function(t,e){this.x+=t,this.y+=e},n.prototype.stepForward=function(t){var e=o.degreeToRad(this.direction);this.x+=Math.sin(e)*t,this.y-=Math.cos(e)*t},n.prototype.toward=function(){var t,e,i,n,r;if(o.isNumeric(arguments[0].x)&&o.isNumeric(arguments[0].y))t=arguments[0].x,e=arguments[0].y;else{if(!o.isNumeric(arguments[0])||!o.isNumeric(arguments[1]))throw"請傳入角色(Sprite)或是 X, Y 坐標值";t=arguments[0],e=arguments[1]}i=t-this.x,n=e-this.y,r=Math.atan2(i,-n),this.direction=o.radToDegree(r)},n.prototype.touched=function(){if(arguments[0].constructor===Array){for(var t=0;t<arguments[0].length;t++)if(r.call(this,arguments[0][t]))return!0;return!1}return r.apply(this,arguments)},n.prototype.distanceTo=function(){return o.isNumeric(arguments[0].x)&&o.isNumeric(arguments[0].y)?o.distanceBetween(this,arguments[0]):o.isNumeric(arguments[0])&&o.isNumeric(arguments[1])?o.distanceBetween(this.x,this.y,arguments[0],arguments[1]):void 0},n.prototype.always=n.prototype.forever=function(t){this._onTickFuncs.push(t)},n.prototype.when=n.prototype.on=function(){var t=arguments[0],e=this._eventList;return"listen"==t?e.register(t,arguments[1],this,arguments[2]):"hover"==t||"click"==t?e.register(t,this,arguments[1]):"touch"==t?e.register(t,this,arguments[1],arguments[2]):(console.log('Sprite.on() does only support "listen", "click", hover" and "touch" events'),!1)},n.prototype.destroy=function(){this._deleted=!0},n.prototype.getCurrentCostume=function(){var t=this.costumeId;return this.costumes[t]},n.prototype.animate=function(t,e,i){this._animation={frames:t,rate:e||5,callback:i,timer:0}},n.prototype.nextCostume=function(){this.costumeId+=1,this.costumeId>=this.costumes.length&&(this.costumeId=0)},t.exports=n},function(t,e){function i(){this._sprites=[]}i.prototype.runOnTick=function(){this.each(function(){this.update()})},i.prototype.each=function(t){for(var e=this._sprites,i=0;i<e.length;i++)t.call(e[i],e[i])},i.prototype.removeDeletedSprites=function(){for(var t=this._sprites,e=0;e<t.length;e++)t[e]._deleted&&t.splice(e,1)},i.prototype.clear=function(){this._sprites=[]},t.exports=i},function(t,e){/*!  | http://thinkpixellab.com/PxLoader */
function i(t){t=t||{},this.settings=t,null==t.statusInterval&&(t.statusInterval=5e3),null==t.loggingDelay&&(t.loggingDelay=2e4),null==t.noProgressTimeout&&(t.noProgressTimeout=1/0);var e,i=[],r=[],o=[],s=Date.now(),a={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},h=function(t){return null==t?[]:Array.isArray(t)?t:[t]};this.add=function(t){t.tags=new n(t.tags),null==t.priority&&(t.priority=1/0),i.push({resource:t,status:a.QUEUED})},this.addProgressListener=function(t,e){o.push({callback:t,tags:new n(e)})},this.addCompletionListener=function(t,e){r.push({tags:new n(e),callback:function(e){e.completedCount===e.totalCount&&t(e)}})};var c=function(t){t=h(t);var e=function(e){for(var i=e.resource,n=1/0,r=0;r<i.tags.length;r++)for(var o=0;o<Math.min(t.length,n)&&!(i.tags.all[r]===t[o]&&o<n&&0===(n=o))&&0!==n;o++);return n};return function(t,i){var n=e(t),r=e(i);return n<r?-1:n>r?1:t.priority<i.priority?-1:t.priority>i.priority?1:0}};this.start=function(t){e=Date.now();var n=c(t);i.sort(n);for(var r=0,o=i.length;r<o;r++){var s=i[r];s.status=a.WAITING,s.resource.start(this)}setTimeout(u,100)};var u=function(){for(var e=!1,n=Date.now()-s,r=n>=t.noProgressTimeout,o=n>=t.loggingDelay,h=0,c=i.length;h<c;h++){var l=i[h];l.status===a.WAITING&&(l.resource.checkStatus&&l.resource.checkStatus(),l.status===a.WAITING&&(r?l.resource.onTimeout():e=!0))}o&&e&&p(),e&&setTimeout(u,t.statusInterval)};this.isBusy=function(){for(var t=0,e=i.length;t<e;t++)if(i[t].status===a.QUEUED||i[t].status===a.WAITING)return!0;return!1};var l=function(t,e){var n,h,c,u,l=null;for(n=0,h=i.length;n<h;n++)if(i[n].resource===t){l=i[n];break}if(null!=l&&l.status===a.WAITING)for(l.status=e,s=Date.now(),c=o.concat(r),n=0,h=c.length;n<h;n++)u=c[n],(0===u.tags.length||t.tags.intersects(u.tags))&&d(l,u)};this.onLoad=function(t){l(t,a.LOADED)},this.onError=function(t){l(t,a.ERROR)},this.onTimeout=function(t){l(t,a.TIMEOUT)};var d=function(t,e){var n,r,o,s=0,h=0;for(n=0,r=i.length;n<r;n++)o=i[n],!1,(0===e.tags.length||o.resource.tags.intersects(e.tags))&&(h++,o.status!==a.LOADED&&o.status!==a.ERROR&&o.status!==a.TIMEOUT||s++);e.callback({resource:t.resource,loaded:t.status===a.LOADED,error:t.status===a.ERROR,timeout:t.status===a.TIMEOUT,completedCount:s,totalCount:h})},p=this.log=function(t){if(window.console){var n=Math.round((Date.now()-e)/1e3);window.console.log("PxLoader elapsed: "+n+" sec");for(var r=0,o=i.length;r<o;r++){var s=i[r];if(t||s.status===a.WAITING){var h="PxLoader: #"+r+" "+s.resource.getName();switch(s.status){case a.QUEUED:h+=" (Not Started)";break;case a.WAITING:h+=" (Waiting)";break;case a.LOADED:h+=" (Loaded)";break;case a.ERROR:h+=" (Error)";break;case a.TIMEOUT:h+=" (Timeout)"}s.resource.tags.length>0&&(h+=" Tags: ["+s.resource.tags.all.join(",")+"]"),window.console.log(h)}}}}}function n(t){if(this.all=[],this.first=null,this.length=0,this.lookup={},t){if(Array.isArray(t))this.all=t.slice(0);else if("object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&this.all.push(e);else this.all.push(t);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var i=0;i<this.length;i++)this.lookup[this.all[i]]=!0}}function r(t,e,i,n){n=n||{};var r,o=this,s=null;r=this.img=new Image,n.origin&&(r.crossOrigin=n.origin),this.tags=e,this.priority=i;var a=function(){"complete"===o.img.readyState&&h()},h=function(){s.onLoad(o),l()},c=function(){s.onError(o),l()},u=function(){s.onTimeout(o),l()},l=function(){o.unbind("load",h),o.unbind("readystatechange",a),o.unbind("error",c)};this.start=function(e){s=e,o.bind("load",h),o.bind("readystatechange",a),o.bind("error",c),o.img.src=t},this.checkStatus=function(){a()},this.onTimeout=function(){o.img.complete?h():u()},this.getName=function(){return t},this.bind=function(t,e){o.img.addEventListener(t,e,!1)},this.unbind=function(t,e){o.img.removeEventListener(t,e,!1)}}n.prototype.intersects=function(t){if(0===this.length||0===t.length)return!1;if(1===this.length&&1===t.length)return this.first===t.first;if(t.length<this.length)return t.intersects(this);for(var e in this.lookup)if(t.lookup[e])return!0;return!1},i.prototype.addImage=function(t,e,i,n){var o=new r(t,e,i,n);return this.add(o),o.img},t.exports=i},function(t,e){e=t.exports=function(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return o[t];var r=String(t),s=i[r.toLowerCase()];if(s)return s;var s=n[r.toLowerCase()];return s||(1===r.length?r.charCodeAt(0):void 0)};var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */
for(r=97;r<123;r++)i[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)i[r-48]=r;for(r=1;r<13;r++)i["f"+r]=r+111;for(r=0;r<10;r++)i["numpad "+r]=r+96;var o=e.names=e.title={};for(r in i)o[i[r]]=r;for(var s in n)i[s]=n[s]},function(t,e,i){function n(t,e){function n(t){return t.width&&(d.width=f.width=t.width),t.height&&(d.height=f.height=t.height),t.zoom&&(f.zoom=t.zoom,d.style.width=d.width*f.zoom+"px",d.style.height=d.height*f.zoom+"px"),f.gravity=t.gravity||f.gravity,f.update=t.update||f.update,this}function l(t,e,i,n,r){T.path=t,T.x=e,T.y=i,T.w=n,T.h=r}var d=document.getElementById(t),p=d.getContext("2d"),f={width:d.width,height:d.height,zoom:1,updateFunctions:[]},g=new o,y=new a,m=i(4)(d,f,e),v=new s(m,e),w=new c(p,f,e),x=new u,k=new h(function(){T.path&&w.drawBackdrop(T.path,T.x,T.y,T.w,T.h),v.traverse();for(var t=0;t<f.updateFunctions.length;t++)f.updateFunctions[t]();g.removeDeletedSprites(),g.runOnTick(),y.updateFPS(),w.drawSprites(g),w.drawTexts()}),T={path:"#ffffff"};e=e||!1;var I=function(t,e,i){["keydown","keyup","holding","click"].includes(t)&&("function"==typeof e?v.register(t,null,e):v.register(t,e,i))};return{createSprite:function(t){var e=new r(t,v,f,w);return g._sprites.push(e),g._sprites.sort(function(t,e){return t.layer-e.layer}),e},print:w.print,setBackground:l,setBackdrop:l,cursor:m.cursor,key:m.holding,inspector:y,when:I,on:I,set:n,stop:function(){k.stop(),x.stop()},start:function(){k.start()},update:function(t){f.updateFunctions.push(t)},always:function(t){f.updateFunctions.push(t)},forever:function(t){f.updateFunctions.push(t)},ctx:p,clear:function(){w.clear()},preloadImages:function(t,e,i){w.preload(t,e,i)},preloadSounds:x.preload.bind(x),sound:x,broadcast:v.emit.bind(v),drawBackdrop:function(t,e,i,n,r){w.drawBackdrop(t,e,i,n,r)},drawSprites:function(){w.drawSprites(g)}}}var r=i(7),o=i(8),s=i(2),a=i(3),h=i(1),c=i(5),u=i(6);window.Engine=n},function(t,e){function i(){this.loaded=0}i.prototype.preload=function(t,e,i){for(var n=this,r={},o=0;o<t.length;o++){var s=t[o];if(["mp3","ogg","wav"].includes(s.split(".").pop())){var a=new Audio;a.src=s,a.addEventListener("canplaythrough",function(){n.loaded+=1,i&&i(n.loaded),n.loaded>=t.length&&e&&e()}),r[s]=a}}return r},t.exports=i}]);