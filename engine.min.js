!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){function n(t,e){function n(t){return t.width&&(c.width=t.width),t.height&&(c.height=t.height),l.width=t.width||l.width,l.height=t.height||l.height,l.ratio=t.ratio||l.ratio,l.gravity=t.gravity||l.gravity,l.frameFunc=t.frameFunc||l.frameFunc,this}var r=i(1),o=i(3),s=i(7),a=i(4),c=document.getElementById(t),u=c.getContext("2d"),h=new o,l={width:c.width,height:c.height,frameFunc:function(){}};e=e||!1;var d=i(5)(c,e),f=new s(d,e),g=i(8)(u,l,h,e),p=i(10)(l,f,h,a),y={sprites:h,createSprite:function(t){return new r(t,f)},print:g.print,drawSprites:g.drawSprites,drawBackdrop:g.drawBackdrop,cursor:d.cursor,inspector:a,on:function(t,e,i){f.register(t,e,i)},set:n,stop:p.stop,start:p.start,draw:function(t){l.frameFunc=t},ctx:u,clear:g.clear,preloadImages:g.preload};return y}window.Engine=n},function(t,e,i){function n(t,e){this.x=t.x,this.y=t.y,this.direction=t.direction,this.scale=t.scale||1,this.costumes=[].concat(t.costumes),this.currentCostumeId=0,this.width=1,this.height=1,this.hidden=t.hidden,this._onTickFunc=null,this._eventList=e}var r=i(2);n.prototype.moveTo=function(t,e){this.x=t,this.y=e},n.prototype.move=function(t,e){this.x+=t,this.y+=e},n.prototype.stepForward=function(t){var e=r.degreeToRad(this.direction);this.x+=Math.cos(e)*t,this.y-=Math.sin(e)*t},n.prototype.toward=function(){var t,e,i,n,o;if(r.isNumeric(arguments[0].x)&&r.isNumeric(arguments[0].y))t=arguments[0].x,e=arguments[0].y;else{if(!r.isNumeric(arguments[0])||!r.isNumeric(arguments[1]))throw"請傳入角色(Sprite)或是 X, Y 坐標值";t=arguments[0],e=arguments[1]}i=t-this.x,n=e-this.y,o=Math.atan2(-n,i),this.direction=r.radToDegree(o)},n.prototype.touched=function(){var t=crossY=!1;if(arguments[0]instanceof n){var e=arguments[0];t=this.x+this.width/2>e.x-e.width/2&&e.x+e.width/2>this.x-this.width/2,crossY=this.y+this.height/2>e.y-e.height/2&&e.y+e.height/2>this.y-this.height/2}else{if(!r.isNumeric(arguments[0])||!r.isNumeric(arguments[1]))throw"請傳入角色(Sprite)或是 X, Y 坐標值";var i=arguments[0],o=arguments[1];t=this.x+this.width/2>i&&i>this.x-this.width/2,crossY=this.y+this.height/2>o&&o>this.y-this.height/2}return t&&crossY},n.prototype.distanceTo=function(){return r.isNumeric(arguments[0].x)&&r.isNumeric(arguments[0].y)?r.distanceBetween(this,arguments[0]):r.isNumeric(arguments[0])&&r.isNumeric(arguments[1])?r.distanceBetween(this.x,this.y,arguments[0],arguments[1]):void 0},n.prototype.always=n.prototype.forever=function(t){this._onTickFunc=t},n.prototype.on=function(){var t,e,i=arguments[0];if("hover"==i||"click"==i)t=this,e=arguments[1];else{if("touch"!=i)return console.log('Sprite.on() does only support "click", "hover" and "touch" events'),!1;t=Array.isArray(arguments[1])?[this].concat(arguments[1]):[this].concat([arguments[1]]),e=arguments[2]}this._eventList.register(i,t,e)},t.exports=n},function(t,e){var i={};i.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},i.radToDegree=function(t){return t<0&&(t+=2*Math.PI),180*t/Math.PI},i.degreeToRad=function(t){return t/180*Math.PI},i.distanceBetween=function(){var t={x:0,y:0},e={x:0,y:0};if(i.isNumeric(arguments[0].x)&&i.isNumeric(arguments[0].y)&&i.isNumeric(arguments[1].x)&&i.isNumeric(arguments[1].y))t.x=arguments[0].x,t.y=arguments[0].y,e.x=arguments[1].x,e.y=arguments[1].y;else{if(!(i.isNumeric(arguments[0])&&i.isNumeric(arguments[1])&&i.isNumeric(arguments[2])&&i.isNumeric(arguments[3])))throw"請傳入角色(Sprite)或是 X, Y 坐標值";t.x=arguments[0],t.y=arguments[1],e.x=arguments[2],e.y=arguments[3]}return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.exports=i},function(t,e){function i(){}i.prototype.runTickFunc=function(){this.each(function(){this._onTickFunc&&this._onTickFunc()})},i.prototype.each=function(t){for(var e in this)if("Sprite"===this[e].constructor.name)t.call(this[e],this[e]);else if(this[e]instanceof Array)for(var i=this[e],n=0;n<i.length;n++){var r=i[n];t.call(r,r)}},i.prototype.clear=function(){for(var t in this)delete this[t]},t.exports=i},function(t,e){var i={fps:0,lastFrameUpdatedTime:(new Date).getTime(),updateFPS:function(){var t=(new Date).getTime();this.fps=Math.round(1e3/(t-this.lastFrameUpdatedTime)),this.lastFrameUpdatedTime=t}};t.exports=i},function(t,e,i){var n=i(6),r=function(t,e){var i={},r={x:0,y:0},o={x:null,y:null},s={},a={},c={};return e=e||!1,t.setAttribute("tabindex","1"),t.style.outline="none",t.addEventListener("mousemove",function(t){r.x=t.offsetX,r.y=t.offsetY}),t.addEventListener("click",function(t){o.x=t.offsetX,o.y=t.offsetY,e&&console.log("Clicked! cursor:"+JSON.stringify(r))}),t.addEventListener("keydown",function(t){var i=n(t.keyCode);a[i]=!0,c[i]=!0,e&&console.log("Keydown! key:"+i)}),t.addEventListener("keyup",function(t){var i=n(t.keyCode);s[i]=!0,c[i]=!1,e&&console.log("Keyup! key:"+i)}),i.cursor=r,i.clicked=o,i.keyup=s,i.keydown=a,i.holding=c,i};t.exports=r},function(t,e){e=t.exports=function(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return o[t];var r=String(t),s=i[r.toLowerCase()];if(s)return s;var s=n[r.toLowerCase()];return s?s:1===r.length?r.charCodeAt(0):void 0};var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
	 * Programatically add the following
	 */
for(r=97;r<123;r++)i[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)i[r-48]=r;for(r=1;r<13;r++)i["f"+r]=r+111;for(r=0;r<10;r++)i["numpad "+r]=r+96;var o=e.names=e.title={};for(r in i)o[i[r]]=r;for(var s in n)i[s]=n[s]},function(t,e){function i(t,e){this.pool=[],this.io=t,this.debugMode=e||!1}function n(t,e,i,n){var r=t.x+t.width/2>i.x&&i.x>t.x-t.width/2,o=t.y+t.height/2>i.y&&i.y>t.y-t.height/2;r&&o&&(e.call(t),n&&console.log("Just fired a hover handler at: "+JSON.stringify(io.clicked)))}function r(t,e,i,n){if(i.x&&i.y)if(t){var r=t.x+t.width/2>i.x&&i.x>t.x-t.width/2,o=t.y+t.height/2>i.y&&i.y>t.y-t.height/2;r&&o&&e.call(t),n&&console.log("Just fired a click handler on a sprite! ("+JSON.stringify(i)+")")}else e(),n&&console.log("Just fired a click handler on stage! ("+JSON.stringify(i)+")")}function o(t,e,i,n){i[t]&&(e(),n&&console.log("Just fired a keydown handler on: "+t))}function s(t,e,i,n){i[t]&&(e(),n&&console.log("Just fired a holding handler on: "+t))}function a(t,e,i){for(var n=1;n<t.length;n++)if(!t[n-1].touched(t[n]))return!1;return e(),i&&console.log("Just fired a touch handler on: "+t),!0}function c(t){t.clicked.x=null,t.clicked.y=null;for(var e in t.keydown)t.keydown[e]=!1,t.keyup[e]=!1}i.prototype.traverse=function(){for(var t=this.pool,e=this.io,i=this.debugMode,u=0;u<t.length;u++)if("hover"==t[u].event)n(t[u].sprite,t[u].handler,e.cursor,i);else if("click"==t[u].event)r(t[u].sprite,t[u].handler,e.clicked,i);else if("keydown"==t[u].event)o(t[u].key,t[u].handler,e.keydown,i);else if("keyup"==t[u].event)o(t[u].key,t[u].handler,e.keyup,i);else if("holding"==t[u].event)s(t[u].key,t[u].handler,e.holding,i);else if("touch"==t[u].event){if(!t[u].sprites.length||t[u].sprites.length<2)return void console.log("You must pass a sprites array which length is bigger than 1 as the second argument!");a(t[u].sprites,t[u].handler,i)}c(this.io)},i.prototype.clear=function(){this.pool=[]},i.prototype.register=function(t,e,i){var n={event:t,handler:i};"touch"==t?n.sprites=e:"keydown"==t||"keyup"==t||"holding"==t?n.key=e:"hover"!=t&&"click"!=t||(n.sprite=e),console.log(this),this.pool.push(n)},t.exports=i},function(t,e,i){function n(t,e,i,n){function s(){t.clearRect(0,0,d,f)}function a(e,i,n,r,o,s){i=i||20,n=n||20,o=o||16,s=s||"Arial",t.font=o+"px "+s,t.fillStyle=r||"black",t.fillText(e,i,n)}function c(){function e(e){if(!e.hidden){var i=e.currentCostumeId,n=o[e.costumes[i]];n||(n=new Image,n.src=e.costumes[i],o[e.costumes[i]]=n),e.width=n.width,e.height=n.height,t.drawImage(n,e.x-n.width/2,e.y-n.height/2,e.width*e.scale,e.height*e.scale)}}i.each(e)}function u(e,i,n,r,s){if("#"==e[0])t.fillStyle=e,t.fillRect(0,0,d,f);else{var a=o[e];a||(a=new Image,a.src=e,o[e]=a),t.drawImage(a,i||0,n||0,r||a.width,s||a.height)}}function h(t,e,i){function s(t){r.addCompletionListener(function(){t()})}function a(t){r.addProgressListener(function(e){t(e)})}var c={};e&&s(e),i&&a(i);for(var u=0;u<t.length;u++){var h=t[u];o[h]=r.addImage(h)}return c.complete=s,c.progress=a,r.start(),n&&(console.log("Start loading "+t.length+" images..."),r.addProgressListener(function(t){console.log("Preloading progressing...")}),r.addCompletionListener(function(){console.log("Preloading completed!")})),c}var l={},d=e.width,f=e.height;return l.clear=s,l.print=a,l.drawSprites=c,l.drawBackdrop=u,l.preload=h,l}var r=new(i(9)),o={};t.exports=n},function(t,e){/*!  | http://thinkpixellab.com/PxLoader */
function i(t){t=t||{},this.settings=t,null==t.statusInterval&&(t.statusInterval=5e3),null==t.loggingDelay&&(t.loggingDelay=2e4),null==t.noProgressTimeout&&(t.noProgressTimeout=1/0);var e,i=[],r=[],o=[],s=Date.now(),a={QUEUED:0,WAITING:1,LOADED:2,ERROR:3,TIMEOUT:4},c=function(t){return null==t?[]:Array.isArray(t)?t:[t]};this.add=function(t){t.tags=new n(t.tags),null==t.priority&&(t.priority=1/0),i.push({resource:t,status:a.QUEUED})},this.addProgressListener=function(t,e){o.push({callback:t,tags:new n(e)})},this.addCompletionListener=function(t,e){r.push({tags:new n(e),callback:function(e){e.completedCount===e.totalCount&&t(e)}})};var u=function(t){t=c(t);var e=function(e){for(var i=e.resource,n=1/0,r=0;r<i.tags.length;r++)for(var o=0;o<Math.min(t.length,n)&&!(i.tags.all[r]===t[o]&&o<n&&(n=o,0===n))&&0!==n;o++);return n};return function(t,i){var n=e(t),r=e(i);return n<r?-1:n>r?1:t.priority<i.priority?-1:t.priority>i.priority?1:0}};this.start=function(t){e=Date.now();var n=u(t);i.sort(n);for(var r=0,o=i.length;r<o;r++){var s=i[r];s.status=a.WAITING,s.resource.start(this)}setTimeout(h,100)};var h=function(){for(var e=!1,n=Date.now()-s,r=n>=t.noProgressTimeout,o=n>=t.loggingDelay,c=0,u=i.length;c<u;c++){var l=i[c];l.status===a.WAITING&&(l.resource.checkStatus&&l.resource.checkStatus(),l.status===a.WAITING&&(r?l.resource.onTimeout():e=!0))}o&&e&&f(),e&&setTimeout(h,t.statusInterval)};this.isBusy=function(){for(var t=0,e=i.length;t<e;t++)if(i[t].status===a.QUEUED||i[t].status===a.WAITING)return!0;return!1};var l=function(t,e){var n,c,u,h,l,f=null;for(n=0,c=i.length;n<c;n++)if(i[n].resource===t){f=i[n];break}if(null!=f&&f.status===a.WAITING)for(f.status=e,s=Date.now(),u=o.concat(r),n=0,c=u.length;n<c;n++)h=u[n],l=0===h.tags.length||t.tags.intersects(h.tags),l&&d(f,h)};this.onLoad=function(t){l(t,a.LOADED)},this.onError=function(t){l(t,a.ERROR)},this.onTimeout=function(t){l(t,a.TIMEOUT)};var d=function(t,e){var n,r,o,s,c=0,u=0;for(n=0,r=i.length;n<r;n++)o=i[n],s=!1,s=0===e.tags.length||o.resource.tags.intersects(e.tags),s&&(u++,o.status!==a.LOADED&&o.status!==a.ERROR&&o.status!==a.TIMEOUT||c++);e.callback({resource:t.resource,loaded:t.status===a.LOADED,error:t.status===a.ERROR,timeout:t.status===a.TIMEOUT,completedCount:c,totalCount:u})},f=this.log=function(t){if(window.console){var n=Math.round((Date.now()-e)/1e3);window.console.log("PxLoader elapsed: "+n+" sec");for(var r=0,o=i.length;r<o;r++){var s=i[r];if(t||s.status===a.WAITING){var c="PxLoader: #"+r+" "+s.resource.getName();switch(s.status){case a.QUEUED:c+=" (Not Started)";break;case a.WAITING:c+=" (Waiting)";break;case a.LOADED:c+=" (Loaded)";break;case a.ERROR:c+=" (Error)";break;case a.TIMEOUT:c+=" (Timeout)"}s.resource.tags.length>0&&(c+=" Tags: ["+s.resource.tags.all.join(",")+"]"),window.console.log(c)}}}}}function n(t){if(this.all=[],this.first=null,this.length=0,this.lookup={},t){if(Array.isArray(t))this.all=t.slice(0);else if("object"==typeof t)for(var e in t)t.hasOwnProperty(e)&&this.all.push(e);else this.all.push(t);this.length=this.all.length,this.length>0&&(this.first=this.all[0]);for(var i=0;i<this.length;i++)this.lookup[this.all[i]]=!0}}function r(t,e,i,n){n=n||{};var r,o=this,s=null;r=this.img=new Image,n.origin&&(r.crossOrigin=n.origin),this.tags=e,this.priority=i;var a=function(){"complete"===o.img.readyState&&c()},c=function(){s.onLoad(o),l()},u=function(){s.onError(o),l()},h=function(){s.onTimeout(o),l()},l=function(){o.unbind("load",c),o.unbind("readystatechange",a),o.unbind("error",u)};this.start=function(e){s=e,o.bind("load",c),o.bind("readystatechange",a),o.bind("error",u),o.img.src=t},this.checkStatus=function(){a()},this.onTimeout=function(){o.img.complete?c():h()},this.getName=function(){return t},this.bind=function(t,e){o.img.addEventListener(t,e,!1)},this.unbind=function(t,e){o.img.removeEventListener(t,e,!1)}}n.prototype.intersects=function(t){if(0===this.length||0===t.length)return!1;if(1===this.length&&1===t.length)return this.first===t.first;if(t.length<this.length)return t.intersects(this);for(var e in this.lookup)if(t.lookup[e])return!0;return!1},i.prototype.addImage=function(t,e,i,n){var o=new r(t,e,i,n);return this.add(o),o.img},t.exports=i},function(t,e){function i(t,i,r,o){function s(){if("readyToStart"===c){c="running";var e=function(){"running"===c?(r.runTickFunc(),t.frameFunc(),i.traverse(),o.updateFPS(),setTimeout(function(){requestAnimationFrame(e)},1e3/n)):c="readyToStart"};setTimeout(e,0)}else"stopping"===c&&setTimeout(s,10)}function a(){"running"===c&&(c="stopping")}var c="readyToStart";return e.start=s,e.stop=a,e}var n=60;t.exports=i}]);