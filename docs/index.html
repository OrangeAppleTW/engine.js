<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>Document</title><link rel="stylesheet" href="../lib/atom-one-dark.css"><link rel="stylesheet" href="./index.css"><link rel="stylesheet" href="../lib/codemirror/codemirror.css"><link rel="stylesheet" href="../lib/codemirror/theme/mbo.css"><script src="../lib/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://code.jquery.com/jquery-3.2.1.min.js"></script><script src="./index.js"></script><script src="../lib/codemirror/codemirror.js"></script><script src="../lib/codemirror/mode/javascript/javascript.js"></script></head><body><div class="container"><div class="treemenu"><ul><li><a href="#intro">Engine</a><ul><li><a href="#intro">介紹</a></li><li><a href="#require">環境準備</a></li></ul></li><li><a href="#start">開始</a><ul><li><a href="#start-game">創造遊戲</a></li><li><a href="#start-assets">素材載入</a></li><li><a href="#start-setBackdrop">設定背景圖</a></li><li><a href="#start-createSprite">創造角色</a></li><li><a href="#start-forever">遊戲迴圈</a></li><li><a href="#start-event">遊戲事件</a></li><li><a href="#start-else">完成</a></li></ul></li><li><a href="#sprite-prop">角色的特徵</a><ul><li><a href="#sprite-prop-xy">座標</a></li><li><a href="#sprite-prop-direction">方向</a></li><li><a href="#sprite-prop-scale">大小</a></li><li><a href="#sprite-prop-rotationStyle">旋轉方式</a></li><li><a href="#sprite-prop-opacity">透明度</a></li><li><a href="#sprite-prop-costumeId">造型編號</a></li><li><a href="#sprite-prop-layer">圖層順序</a></li><li><a href="#sprite-prop-hidden">隱藏</a></li></ul></li><li><a href="#sprite-methods">角色的方法</a><ul><li><a href="#sprite-methods-moveTo">移動到</a></li><li><a href="#sprite-methods-move">位移</a></li><li><a href="#sprite-methods-stepForward">朝向前方移動</a></li><li><a href="#sprite-methods-toward">朝向</a></li><li><a href="#sprite-methods-event">綁定事件</a></li><li><a href="#sprite-methods-touched">碰撞檢測</a></li><li><a href="#sprite-methods-forever">角色遊戲迴圈</a></li><li><a href="#sprite-methods-destroy">銷毀</a></li></ul></li><li><a href="#event">事件</a><ul><li><a href="#event-click">點擊</a></li><li><a href="#event-touch">碰撞</a></li><li><a href="#event-hover">滑鼠覆蓋</a></li><li><a href="#event-keydown">鍵盤按下</a></li><li><a href="#event-keyup">鍵盤放開</a></li><li><a href="#event-holding">鍵盤按住</a></li></ul></li><li><a href="#keyboard-cursor">鍵盤&滑鼠</a><ul><li><a href="cursor">滑鼠狀態</a></li><li><a href="#keyboard">鍵盤狀態</a></li></ul></li><li><a href="#sound">聲音</a><ul><li><a href="#sound-play">播放</a></li><li><a href="#sound-setVolume">音量大小</a></li><li><a href="#sound-mute">靜音</a></li><li><a href="#sound-stop">停止</a></li></ul></li><li><a href="#pen">繪筆</a><ul><li><a href="#pen-attr">繪筆屬性</a></li><li><a href="#pen-drawLine">線條</a></li><li><a href="#pen-drawRect">矩形</a></li><li><a href="#pen-drawCircle">圓形</a></li><li><a href="#pen-drawTriangle">三角形</a></li><li><a href="#pen-drawPolygon">多邊形</a></li><li><a href="#pen-drawText">文字</a></li></ul></li><li><a href="#1">開發</a><ul><li><a href="#1">環境安裝</a></li><li><a href="#1">叩叮學院</a></li></ul></li></ul></div><div class="content"><h1><span id="engine"></span>JavaScript 遊戲引擎</h1><section><h2><span id="intro">#</span>Intro</h2><section><h3><span id="intro">#</span>介紹</h3></section><section><h3><span id="require">#</span>環境準備</h3><p> 
1.<a href="https://koding.school/">叩叮學院X線上編輯器</a><br>2. 使用 CDN</p><pre class="javascript"><code>&lt;script src="https://orangeappletw.github.io/engine.js/engine.min.js"&gt;&lt;/script&gt;</code></pre></section></section><section><h2><span id="start">#</span>開始</h2><section><h3><span id="start-game">#</span>創造遊戲</h3><p class="syntax">Engine(canvasId);</p><p>canvasId: canvas 元素的 ID</p><pre class="javascript"><code>var Game = Engine('stage');</code></pre><p>初始化遊戲設定</p><pre class="javascript"><code>Game.set({
    width: 400, // Default: 640px
    height: 400, // Default: 480px
    zoom: 0.8, // Default: 1
    update: function(){}, // 每次刷新畫面都要做的事放這裡
    debugMode: true // Default: false
});                                  </code></pre><pre class="javascript"></pre></section><section><h3><span id="start-assets">#</span>載入素材</h3><p></p><p class="syntax">Game.preloadImages([path1, path2, path3], completeCallback, progressCallback);</p><p></p><pre class="javascript"><code>Game.preloadImages(
[
    "./assets/bird.png",
    "./assets/up-tube.png",
    "./assets/down-tube.png",
    "./assets/start-button.png",
    "./assets/gameOver.png"
],
function() {
    Game.start();
}</code></pre></section><section><h3><span id="start-setBackdrop">#</span>設定背景</h3><p></p><p><span class="syntax">setBackdrop(path, x, y, width, height);</span>path: 素材的網址<br>x: 背景圖左上角 x 座標<br>y: 背景圖左上角 y 座標<br>width: 長度<br>height: 寬度</p><p></p><pre class="javascript"><code>setBackdrop("./assets/background.png", 0, 0, 470, 400);</code></pre><span href="" code-path="../test/start/setBackdrop.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="start-createSprite">#</span>創造角色</h3><p>創造出小鳥，預設位置為場景中央</p><pre class="javascript"></pre><p>創造出上下水管，可以傳入物件的參數</p><pre class="javascript"><code>var bird = createSprite("./assets/bird.png");
 
var tubeUp = createSprite({
    costumes: "./assets/up-tube.png",
    x: 450,
    y: -30
});
var tubeDown = createSprite({
    costumes: "./assets/down-tube.png",
    x: 450,
    y: 430
});</code></pre><span code-path="../test/start/createSprite.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="start-forever">#</span>遊戲迴圈</h3><p><span class="syntax">Game.forever(fn) | Game.aways(fn) | Game.update(fn)</span>                        fn: 遊戲迴圈，重複不斷執行的函式</p><p>在遊戲迴圈裡不斷移動水管，如果水管移動超出邊界就重置水管的位置</p><pre class="javascript"><code>forever(function() {
    tubeUp.x -= 2;
    tubeDown.x -= 2;
    if(tubeUp.x < 0) {
        resetTube();
} 
});</code></pre><p>重置水管的函式，將水管移到右邊遊戲場景外，並隨機水管的位置</p><pre class="javascript"><code>forever(function() {
    tubeUp.x -= 2;
    tubeDown.x -= 2;
    if(tubeUp.x < 0) {
        resetTube();
    } 
});</code></pre><span code-path="../test/start/forever.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="start-event">#</span>遊戲事件</h3><p>當滑鼠點擊時，鳥要往上飛行</p><pre class="javascript"><code>var vy = 0;
when('click', function() { vy = -5; });
forever(function() {
    bird.y + vy;
    vy += 0.2;
});</code></pre><p>小鳥碰撞水管時結束遊戲，顯示遊戲結束的 Logo 和重新開始的按鈕</p><pre class="javascript"><code>bird.when('touch', [tubeUp, tubeDown], gameOver);
function gameOver () {
   gameOverLogo.hidden = false;
   startBtn.hidden = false;
 status = 'gameOver';
}</code></pre><span code-path="../test/start/event.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="start-else">#</span>完成</h3><p>創造開始按鈕與遊戲結束Logo，遊戲開始時隱藏結束Logo，Sprite.hidden 設為 true 角色將會被隱藏</p><pre class="javascript"><code>var startBtn = createSprite("./assets/start-button.png");
var gameOverLogo = createSprite({
    costumes: "./assets/gameOver.png",
    hidden: true,
    y: 100
});</code></pre><p>遊戲初始化函式，初始角色的座標與歸零分數，並將遊戲狀態改為 "playing"</p><pre class="javascript"><code>function start () {
    startBtn.hidden = true;
    gameOverLogo.hidden = true;
    status = 'start';
    bird.y = 200;
    scores = 0;
    randomPos();
}</code></pre><p>改寫遊戲迴圈的判斷式</p><pre class="javascript"><code>if(status == 'start') {
  tubeUp.x -= 2;
  tubeDown.x -= 2;
  if(tubeUp.x < 0) {
      randomPos();
      scores += 1;
  } 
  vy += 0.2;
  bird.y += vy;
}
if(bird.y > 400 || bird.y < 0) gameOver();</code></pre><span code-path="../test/start/final.js" class="example-code js-example-code">範例程式</span></section></section><section><h2><span id="sprite-prop">#</span>角色屬性</h2><section><h3><span id="sprite-prop-xy">#</span>座標</h3><p></p><p></p><p></p><pre class="javascript"><code>player.x = 50;
player.y = 50;</code></pre><span code-path="../test/sprite/xy.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-direction">#</span>方向</h3><p>角色面向的方位，值介於 0 ~ 359 度</p><p></p><p></p><pre class="javascript"><code>player.direction = 180;</code></pre><span code-path="../test/sprite/direction.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-scale">#</span>縮放</h3><p>角色大小縮放比例</p><p></p><p></p><pre class="javascript"><code>player.scale = 0.5;</code></pre><span code-path="../test/sprite/scale.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-rotationStyle">#</span>旋轉方式</h3><p>角色旋轉的方式</p><p>player.rotationStyle</p><p>三種方式
full (預設)
flipped (左右翻轉)
fixed (固定不旋轉)</p><pre class="javascript"><code>player.rotationStyle = 'fixed'</code></pre><span code-path="../test/sprite/rotationStyle.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-opacity">#</span>透明度</h3><p>角色的透明度</p><p>player.opacity</p><p>值介於 0 ~ 1</p><pre class="javascript"><code>player.opacity</code></pre><span code-path="../test/sprite/opacity.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-costumeId">#</span>造型編號</h3><p>角色當前的造型</p><p>player.costumeId</p><p>造型編號</p><pre class="javascript"><code>player.costumeId = 1;</code></pre><span code-path="../test/sprite/costumeId.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-layer">#</span>圖層</h3><p>角色當前所在的圖層</p><p>player.player</p><p></p><pre class="javascript"><code> 
player.player = 2;</code></pre><span code-path="../test/sprite/layer.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-prop-hidden">#</span>隱藏</h3><p>角色隱藏</p><p>player.hidden</p><p></p><pre class="javascript"><code>player.hidden = true;</code></pre><span code-path="../test/sprite/hidden.js" class="example-code js-example-code">範例程式</span></section></section><section><h2><span id="sprite-methods">#</span>角色方法</h2><section><h3><span id="sprite-methods-moveTo">#</span>移動到</h3><p>角色移動到</p><p>player.moveTo(x, v);</p><p>x: 目的位置 x 座標
y: 目的位置 y 座標</p><pre class="javascript"><code>player.moveTo(100, 100);</code></pre><span code-path="../test/sprite/moveTo.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-methods-move">#</span>移動</h3><p>角色移動</p><p>player.move(vx, vy);</p><p>vx: 水平移動距離 vx
vy: 垂直移動距離 vy</p><pre class="javascript"><cpde>player.move(100, 100);</cpde></pre><span code-path="../test/sprite/move.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-methods-stepForward">#</span>朝向前方移動</h3><p>朝向前方移動</p><p>player.stepForward(d);</p><p>d: 移動的步數</p><pre class="javascript"><code>player.stepForward(50);</code></pre><span code-path="../test/sprite/stepForward.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-methods-toward">#</span>朝向</h3><p>角色朝向另一個角色</p><p>player.toward(target);</p><p>target: 角色對象</p><pre class="javascript"><code>player.toward(target);                           </code></pre><span code-path="../test/sprite/toward.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-methods-event">#</span>綁定事件</h3><p>綁定事件在角色身上</p><p>player.when(eventName, callback)</p><p></p><pre class="javascript"></pre></section><section><h3><span id="sprite-methods-touched">#</span>碰撞檢測</h3><p></p><p>spriteA.touched(spriteB);</p><p>spriteB: 碰撞的對象，若碰撞返回 true</p><pre class="javascript"><code>player.touched(target);</code></pre><span code-path="../test/sprite/touched.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-methods-forever">#</span>角色迴圈</h3><p></p><p>player.forever(fun);</p><p>fun: 不斷執行的函示，this 綁定角色對象</p><pre class="javascript"><code>player.forever(fun);</code></pre><span code-path="../test/sprite/forever.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sprite-methods-destroy">#</span>銷毀</h3><p>刪除角色</p><p>player.destroy();</p><p></p><pre class="javascript"><code>player.destroy();</code></pre><span code-path="../test/sprite/destroy.js" class="example-code js-example-code">範例程式</span></section></section><section><h2><span id="event">#</span>事件</h2><section><h3><span id="event-click">#</span>點擊事件</h3><p>滑鼠點擊</p><p></p><pre class="javascript"><code>when('click', enemies, function () {
	 life -= 1;
})</code></pre><span code-path="../test/events/click.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="event-touch">#</span>碰撞</h3><p>角色碰撞檢測</p><p>when('touch',[Sprite1, Sprite2], function () {});</p><p></p><pre class="javascript"><code>when('touch',[Sprite1, Sprite2], function () {});</code></pre><span code-path="../test/events/touch.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="event-hover">#</span>滑鼠碰撞</h3><p>滑鼠覆蓋</p><p></p><p></p><pre class="javascript"><code>when("hover", target, function() {});</code></pre><span code-path="../test/events/hover.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="event-keydown">#</span>鍵盤按下</h3><p>當特定按鍵按下時</p><p>when('keydown', keyName, function () {});</p><p></p><pre class="javascript"><code>when('keydown', keyName, function () {});</code></pre><span code-path="../test/events/keydown.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="event-keyup">#</span>鍵盤放開</h3><p>當特定按鍵放開時</p><p>when(&apos;keyup&apos;, keyName, function () {});</p><p></p><pre class="javascript"><code>pwhen('keyup', keyName, function () {});</code></pre><span code-path="../test/events/keyup.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="event-holding">#</span>按鍵持續按壓</h3><p>當特定按鍵持續被按住時</p><p>pwhen('holding', keyName, function () {});</p><p></p><pre class="javascript"><code>when('holding', keyName, function () {});</code></pre><span code-path="../test/events/holding.js" class="example-code js-example-code">範例程式</span></section></section><section><h2><span id="keyboard-cursor">#</span>鍵盤&滑鼠</h2><section><h3><span id="cursor">#</span>滑鼠</h3><p>cursor.x X座標;<br>cursor.y Y座標;<br>cursor.left 左鍵是否按住;<br>cursor.right 右鍵是否按住;<br>cursor.isDown 是否按住;</p><pre class="javascript"><code>var cursor = Game.cursor;
forever(function(){
	 var y = 80
	 print('**滑鼠測試**', 30, y, 'white');
	 print('cursor.x: ' + cursor.x, 30, y+ 20, 'white');
	 print('cursor.y: ' + cursor.y, 30, y + 2*20, 'white');
	 print('cursor.left: ' + cursor.left, 30, y + 3*20, 'white');
	 print('cursor.right: ' + cursor.right, 30, y + 4*20, 'white');
 	 print('cursor.isDown: ' + cursor.isDown, 30, y + 5*20, 'white');
});</code></pre><span href="" code-path="../test/io/cursor.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="keyboard">#</span>鍵盤</h3><p>key[keyName] 鍵盤中特定鍵的狀態</p><p></p><pre class="javascript"><code>forever(function(){
	  var y = 80
	  print('**鍵盤測試**', 30, y + 8*20, 'white');
	  print('key.q: ' + key.q, 30, y + 9*20, 'white');
	  print('key.w: ' + key.w, 30, y + 10*20, 'white');
	  print('key.e: ' + key.e, 30, y + 11*20, 'white');
	  print('key.r: ' + key.r, 30, y + 12*20, 'white');
});</code></pre><span href="" code-path="../test/io/keyboard.js" class="example-code js-example-code">範例程式</span></section></section><section><h2><span id="sound">#</span>聲音</h2><section><h3><span id="sound-play">#</span>播放</h3><p>播放聲音</p><p>sound.play(fileName);</p><p>fileName String: 音效素材的名字</p><pre class="javascript"><code>sound.play("shoot.mp3");</code></pre><span code-path="../test/sound/play.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sound-setVolume">#</span>設定音量</h3><p>設定音量</p><p>sound.setVolume(num);</p><p>num Number: 0 ~ 1 的音量大小</p><pre class="javascript"><code>sound.setVolume(0.5);</code></pre><span code-path="../test/sound/setVolume.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sound-mute">#</span>靜音</h3><p>全部音效設定是否靜音</p><p>sound.mute(bool);</p><p>bool Boolean: 若為 true 則將所有音效靜音</p><pre class="javascript"><code>sound.mute(true);</code></pre><span code-path="../test/sound/stop.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="sound-stop">#</span>停止播放</h3><p>停止所有的音效</p><p>sound.stop();</p><p>無</p><pre class="javascript"><code>sound.stop();</code></pre><span code-path="../test/sound/stop.js" class="example-code js-example-code">範例程式</span></section></section><section><h2><span id="pen">#</span>繪筆</h2><section><h3><span id="pen-attr">#</span>畫筆的屬性</h3><p>設定繪筆的顏色、大小</p><p>pen.color: 繪筆線條的顏色<br>pen.size: 繪筆線條的寬度尺寸<br>pen.fillColor: 幾何圖形的填充的顏色</p><pre class="javascript"><code>var pen = Game.pen;
 
pen.color = "red";
pen.size = 30;
pen.fillColor = "blue";</code></pre></section><section><h3><span id="pen-drawLine">#</span>線條</h3><p class="syntax">Game.pen.drawLine(x1, y1, x2, y2);</p><p>x1: 起點 x 座標<br>y1: 起點 y 座標<br>x2: 終點 x 座標<br>y2: 終點 y 座標</p><pre class="javascript"><code>Game.pen.drawLine(10, 10, 150, 150);</code></pre><span href="" code-path="../test/pen/drawLine.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="pen-drawRect">#</span>矩形</h3><p class="syntax">Game.pen.drawRect(x, y, width, height);</p><p>x: x 座標<br>y: y 座標<br>width: 長<br>height: 寬</p><pre class="javascript"><code>Game.pen.drawRect(400, 40, 200, 100);</code></pre><span href="" code-path="../test/pen/drawRect.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="pen-drawCircle">#</span>圓形</h3><p class="syntax">Game.pen.drawCircle(x, y, r);</p><p>x: 圓心 x 座標<br>y: 圓心 y 座標<br>r: 半徑長</p><pre class="javascript"><code>Game.pen.drawCircle(200, 100, 100);</code></pre><span href="" code-path="../test/pen/drawCircle.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="pen-drawTriangle">#</span>三角形</h3><p class="syntax">Game.pen.drawTriangle(x1, y1, x2, y2, x3, y3);</p><p>x1, y1: 角 1 的座標<br>x2, y2: 角 2 的座標<br>x3, y3: 角 3 的座標</p><pre class="javascript"><code>Game.pen.drawTriangle(200, 200, 300, 300, 200, 300);</code></pre><span href="" code-path="../test/pen/drawTriangle.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="pen-drawPolygon">#</span>多邊形</h3><p class="syntax">pen.drawCircle(x1, y1, x2, y2, x3, y3, ...);</p><p></p><pre class="javascript"><code>Game.pen.drawPolygon(320, 240, 520, 120, 520, 420, 100, 400, 100, 200);</code></pre><span href="" code-path="../test/pen/drawPolygon.js" class="example-code js-example-code">範例程式</span></section><section><h3><span id="pen-drawText">#</span>文字</h3><p class="syntax">pen.drawText(text, x, y, font);</p><p>text: 文字的內容<br>x: X 座標<br>y: Y 座標<br>font: 字型，預設為 "Arial"</p><pre class="javascript"><code>Game.pen.drawText('測試123', 100, 100);</code></pre><span href="" code-path="../test/pen/drawText.js" class="example-code js-example-code">範例程式</span></section></section></div></div><div class="popup js-popup"><div class="popup-content"><div class="stage"><div class="textarea-container"><textarea id="editor-textarea" name=""></textarea></div><div class="iframe-container"><iframe id="sandbox" src="../test/sandbox.html" frameborder="0"></iframe></div></div><div class="btns"><button class="btn start js-start">開始</button><button class="btn stop js-stop">停止</button></div></div></div><button id="editor-toggle">編輯器</button></body></html>